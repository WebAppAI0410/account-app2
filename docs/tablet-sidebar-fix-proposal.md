# タブレット版サイドバー挙動・修正計画（ブラッシュアップ版）

## 背景
タブレット端末でメニューボタン（ハンバーガーメニュー）を押すと、イベント一覧画面全体が右側にスライドしてしまう現象が発生しています。

## 要件・ゴール
- メニューボタンを押したとき、イベント一覧画面（メインコンテンツ）は一切動かさず、サイドバー（メニュー）がオーバーレイとして右側から重なるように表示されること。
- モバイル・タブレット・デスクトップで一貫したUI/UXを実現すること。
- 既存の機能（イベント作成・テーマ切替・ページ遷移・広告バナー等）に影響を与えないこと。
- アクセシビリティ（キーボード操作・フォーカス管理・aria属性）も担保すること。

## 問題点の整理
- サイドバー開閉時にメインコンテンツの幅や位置が動的に変化している（`w-...`や`mr-...`などのクラスが付与されている）。
- サイドバーのz-indexやオーバーレイの重なり順が他UIと競合する可能性。
- レイアウトの親要素（flex/grid）の構造によっては、意図しない副作用が出る場合がある。

## 修正方針
1. **メインコンテンツの幅・位置を常に固定**
    - サイドバー開閉状態やデバイス種別に関わらず、メインコンテンツ（イベント一覧）の幅・位置を100%固定にする。
    - サイドバー開閉時に`w-...`や`mr-...`などのクラスをメインコンテンツに付与しない。
2. **サイドバーはオーバーレイとして表示**
    - サイドバー（メニュー）は、開いたときのみ`fixed`/`absolute`で右側に重ねて表示する。
    - サイドバーの背後にオーバーレイ（半透明の黒背景）を表示し、クリックで閉じられるようにする。
    - サイドバー・オーバーレイのz-indexを十分高く設定し、他のUI要素より前面に出す。
3. **レイアウト構造の明確化**
    - 親要素は`grid`または`flex`でシンプルに管理し、サイドバーとメインコンテンツの関係を明確にする。
    - サイドバーは常にDOM上は存在し、開閉状態で表示/非表示を切り替える。
4. **アクセシビリティ・既存機能の担保**
    - サイドバー開閉時のフォーカス管理、aria属性、キーボードショートカット（Ctrl/Cmd+B）を維持。
    - イベント作成・テーマ切替・ページ遷移・広告バナー等の既存機能に影響が出ないようにする。

## 具体的な実装例
- `src/app/page.tsx`のメインコンテンツのクラスから、サイドバー開閉状態による幅・位置調整のロジックを削除し、常に`w-full`（または`flex-1`）とする。
- `src/components/ui/sidebar.tsx`で、タブレット/デスクトップでもサイドバーを`fixed`なオーバーレイ表示に統一する。
- サイドバー開閉時のアニメーションやオーバーレイ表示は、モバイルと同じ仕組みを流用する。
- z-indexの値を一元管理し、他UIとの競合を防ぐ。
- テスト観点として、各デバイス・画面サイズでの動作、既存機能の正常性、アクセシビリティを確認する。

## 期待される効果
- タブレットでメニューを開いても、イベント一覧画面が一切動かず、サイドバーのみが重なる直感的なUIとなる。
- モバイル・タブレット・デスクトップで一貫したユーザー体験を提供できる。
- 既存機能・アクセシビリティ・パフォーマンスも維持される。

---

（実装例や具体的なクラス指定は、既存の`hamburger-menu-fix-plan-v4.md`等も参照）
